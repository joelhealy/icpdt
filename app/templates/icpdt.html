{% extends "base.html" %}
{% block body %}
  <div class="page">
    <!-- Header -->
    <div class="header">
      <p>&nbsp;</p>
    </div>
    <!-- Tab links -->
    <div class="tab">
      <button id="import-tab-button" class="tablinks active" onclick="openTab(event, 'import-tab')">Import PRN File</button>
      <button id="edit-tab-button" class="tablinks" onclick="openTab(event, 'edit-tab')">Edit Sample Information</button>
      <button id="calculate-tab-button" class="tablinks" onclick="openTab(event, 'calculate-tab')">Calculate/Export Results</button>
      <button id="misc-tab-button" class="tablinks" onclick="openTab(event, 'misc-tab')">Edit Spike Solutions, MDLs, etc.</button>
    </div>
    
    <!-- Tab content -->
    <div id="import-tab" class="tabcontent" style="display: block">
      <form method="POST" enctype="multipart/form-data">
        <div class="import-prn-grid">
          <!-- Instrument dropdownlist -->
          <label for="import-instrument-id">Instrument ID:</label>
          <select id="import-instrument-id">
            <option value="EAQ108">EAQ108</option>
            <option value="EAQ104">EAQ104</option>
            <option value="EAQ109">EAQ109</option>
            <option value="EAQ39">EAQ39</option>
            <option value="EAQ41">EAQ41</option>
            <option value="EAQ59">EAQ59</option>
          </select>
          <!-- Filename textbox -->
          <label id="filename-label" for="file-input">File Name:</label>
          <input id="import-filename" type="text" placeholder="no import file selected" readonly/>
          <!-- Matrix dropdownlist -->
          <label for="import-matrix">Matrix:</label>
          <select id="import-matrix">
            <option value="Air">Air</option>
            <option value="Solid">Solid</option>
            <option value="Tissue">Tissue</option>
            <option value="Waste">Waste</option>
            <option value="Water">Water</option>
          </select>
          <!-- Method dropdownlist -->
          <label for="method">Method:</label>
          <select id="method">
            <option value="RLAB Method 3122.3E">RLAB Method 3122.3E</option>
            <option value="RLAB Method 3122.3F">RLAB Method 3122.3F</option>
            <option value="RLAB Method 3122.3F Dis">RLAB Method 3122.3F Dis</option>
            <option value="RLAB Method 3122.3F TCLP">RLAB Method 3122.3F TCLP</option>
          </select>
          <!-- Initials textbox -->
          <label for="initials">Analyst Initials:</label>
          <input id="initials" type="text" placeholder="jhh" />
          <!-- Import Button -->
          <input id="import-button" type="submit" value="Import" />
          <!-- About Box -->
          <div id="about-box">
            <p>Version: 1.6.1</p>
            <p>This version of ICP DT will correctly process
            Solid, Tissue, Waste (solid and liquid) and
            Water samples plus TCLP of any matrix, but
            not Air or Wipe samples.</p>
            <p>PRN files generated by Syngistix must be
            converted to ANSI before being processed.</p>
          </div>
          <div>
          <input id="file-input" type="file" name="file">
          </div>
          <div id="import-tab-flash">
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                <ul class="flashes">
                {% for category, message in messages %}
                  {% if category == 'import-tab' %}
                    <li>{{ message }}</li>
                  {% endif %}
                {% endfor %}
                </ul>
              {% endif %}
            {% endwith %}
          </div>
        </div>  <!-- end of import-prn-grid -->
      </form>
    </div>
    
    <div id="edit-tab" class="tabcontent" style="display: none">
      <div>
        <!-- Header -->
        <div class="header">
          <label>Batch ID:</label>
          <!-- Batch ID dropdownlist -->
          <select id="batch-id">
            <option value="4428">4428</option>
            <option value="4427">4427</option>
            <option value="4426">4426</option>
            <option value="4425">4425</option>
            <option value="4424">4424</option>
            <option value="4423">4423</option>
          </select>
        </div>
        <!-- Sample Information Table -->
        <div class="sample-info-table">
          <!-- Header Row -->
          <div class="sample-info-item">Batch ID</div>
          <div class="sample-info-item">ASR Number</div>
          <div class="sample-info-item">Sample Number</div>
          <div class="sample-info-item">QC Code</div>
          <div class="sample-info-item">Initial Wt/Vol</div>
          <div class="sample-info-item">Diluted Volume</div>
          <div class="sample-info-item">Solids Ratio</div>
          <div class="sample-info-item">Spike Solution ID</div>
          {% if sample_info %}
            {% for sample_info_row in sample_info %}
              <div class="sample-info-item">{{ sample_info_row.batch_id }}</div>
              <div class="sample-info-item">{{ sample_info_row.asr_number }}</div>
              <div class="sample-info-item">{{ sample_info_row.sample_number }}</div>
              <div class="sample-info-item">{{ sample_info_row.qc_code }}</div>
              <div class="sample-info-item">{{ sample_info_row.initial_weight_volume }}</div>
              <div class="sample-info-item">{{ sample_info_row.diluted_volume }}</div>
              <div class="sample-info-item">{{ sample_info_row.solids_ratio }}</div>
              <div class="sample-info-item">{{ sample_info_row.spike_solution_id }}</div>
            {% endfor %}
          {% endif %}
        </div>
        <!-- Footer -->
        <div class="footer">
          <button style="float: right">Save and Update</button>
        </div>
      </div>
      <div id="edit-tab-flash">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <ul class="flashes">
            {% for category, message in messages %}
              {% if category == 'edit-tab' %}
                <li>{{ message }}</li>
              {% endif %}
            {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
      </div>
    </div>
    {% if import_lines %}
      {% for line in import_lines %}
        <p>{{ line }}</p>
      {% endfor %}
    {% endif %}
    
    <div id="calculate-tab" class="tabcontent" style="display: none">
      <div>
        <!-- Header -->
        <div class="header">
          <label>Instrument ID:</label>
          <!-- Instrument dropdownlist -->
          <select id="instrument-id">
            <option value="EAQ108">EAQ108</option>
            <option value="EAQ104">EAQ104</option>
            <option value="EAQ109">EAQ109</option>
            <option value="EAQ39">EAQ39</option>
            <option value="EAQ41">EAQ41</option>
            <option value="EAQ59">EAQ59</option>
          </select>
          <label>Batch ID:</label>
          <!-- Batch ID dropdownlist -->
          <select id="batch-id">
            <option value="4428">4428</option>
            <option value="4427">4427</option>
            <option value="4426">4426</option>
            <option value="4425">4425</option>
            <option value="4424">4424</option>
            <option value="4423">4423</option>
          </select>
          <label>File Name:</label>
          <input type="text" placeholder="export filename" />
          <button>Export</button>
        </div>
        <!-- Results Table -->
        <div class="results-table">
          <!-- Header Row -->
          <div class="results-item">ASR Number</div>
          <div class="results-item">Sample Number</div>
          <div class="results-item">QC Code</div>
          <div class="results-item">Matrix</div>
          <div class="results-item">Method</div>
          <div class="results-item">Analyte Name</div>
          <div class="results-item">Raw Result</div>
          <div class="results-item">Final Result</div>
          <div class="results-item">Detection ID</div>
          <div class="results-item">RL</div>
          <div class="results-item">Concentration Spiked</div>
          <div class="results-item">Spike Solution ID</div>
          <div class="results-item">Element</div>
          <div class="results-item">Instrument Result</div>
          <div class="results-item">Initial Wt/Vol</div>
          <div class="results-item">Diluted Volume</div>
          <div class="results-item">Solids Ratio</div>
          <div class="results-item">MDL</div>
          <!-- Header Row -->
          <div class="results-item">6684</div>
          <div class="results-item">21</div>
          <div class="results-item">__</div>
          <div class="results-item">Solid</div>
          <div class="results-item">RLAB Method 3122.3F</div>
          <div class="results-item">Silver</div>
          <div class="results-item">0.795</div>
          <div class="results-item">2.0</div>
          <div class="results-item">U</div>
          <div class="results-item">2.0</div>
          <div class="results-item"></div>
          <div class="results-item"></div>
          <div class="results-item">Ag</div>
          <div class="results-item">0.795</div>
          <div class="results-item">1.008</div>
          <div class="results-item">1</div>
          <div class="results-item">1.02</div>
          <div class="results-item">2.0</div>
          <!-- Header Row -->
          <div class="results-item">6684</div>
          <div class="results-item">21</div>
          <div class="results-item">MS</div>
          <div class="results-item">Solid</div>
          <div class="results-item">RLAB Method 3122.3F</div>
          <div class="results-item">Silver</div>
          <div class="results-item">26.02</div>
          <div class="results-item">26.0</div>
          <div class="results-item"></div>
          <div class="results-item">2.0</div>
          <div class="results-item">20.2</div>
          <div class="results-item">1 ml QCS21 + 1ml SPEX Common + 1ml Ag</div>
          <div class="results-item">Ag</div>
          <div class="results-item">26.02</div>
          <div class="results-item">1.011</div>
          <div class="results-item">1</div>
          <div class="results-item">1.02</div>
          <div class="results-item">2.0</div>
          <!-- Header Row -->
          <div class="results-item">6684</div>
          <div class="results-item">21</div>
          <div class="results-item">MSD</div>
          <div class="results-item">Solid</div>
          <div class="results-item">RLAB Method 3122.3F</div>
          <div class="results-item">Silver</div>
          <div class="results-item">26.49</div>
          <div class="results-item">26.5</div>
          <div class="results-item"></div>
          <div class="results-item">2.0</div>
          <div class="results-item">20.2</div>
          <div class="results-item">1 ml QCS21 + 1ml SPEX Common + 1ml Ag</div>
          <div class="results-item">Ag</div>
          <div class="results-item">26.49</div>
          <div class="results-item">1.01</div>
          <div class="results-item">1</div>
          <div class="results-item">1.02</div>
          <div class="results-item">2.0</div>
          <!-- Header Row -->
          <div class="results-item">6684</div>
          <div class="results-item">22</div>
          <div class="results-item">__</div>
          <div class="results-item">Solid</div>
          <div class="results-item">RLAB Method 3122.3F</div>
          <div class="results-item">Silver</div>
          <div class="results-item">0.953</div>
          <div class="results-item">2.1</div>
          <div class="results-item">U</div>
          <div class="results-item">2.1</div>
          <div class="results-item"></div>
          <div class="results-item"></div>
          <div class="results-item">Ag</div>
          <div class="results-item">0.953</div>
          <div class="results-item">1.017</div>
          <div class="results-item">1</div>
          <div class="results-item">1.087</div>
          <div class="results-item">2.1</div>
        </div>
        <!-- Footer -->
        <div class="footer">
          <label>Report Down To:</label>
          <input type="radio" id="report-to-RL" name="report-down-to" value="RL">
          <label for="report-to-RL">RL</label>
          <input type="radio" id="report-to-MDL" name="report-down-to" value="MDL">
          <label for="report-to-MDL">MDL</label>
          <button>Calculate</button>
          <button>Report</button>
        </div>
      </div>
    </div> 

    <div id="misc-tab" class="tabcontent" style="display: none">
      <div class="misc-grid">
        <div class="misc-grid-section">
          <h3>Spike Solutions</h3>
          <button>Create New Spike Solution</button>
          <button>Edit Spike Solution</button>
        </div>
        <div class="misc-grid-section">
          <h3>Analysis Info</h3>
          <button>Edit Method/Analysis Info</button>
          <button>Edit Analysis Analytes</button>
        </div>
        <div class="misc-grid-section">
          <h3>Samples & Results</h3>
          <button>Delete Import Batches</button>
        </div>
        <div class="misc-grid-section misc-section">
          <div class="misc-sub-grid">
            <h3>Miscellaneous</h3>
            <button>Edit Instrument Info</button>
            <button>Change Password</button>
        </div>
        </div>
      </div>
    </div> 

    <!-- Footer -->
    <div class="footer">
      <p>&nbsp;</p>
    </div>
  </div>

  <script src="{{ url_for('static', filename='scripts/myscript.js') }}"></script>
  {% if tab_button %}
    <script>
      document.getElementById('{{ tab_button }}').click();
    </script>
  {% endif %}
{% endblock %}

